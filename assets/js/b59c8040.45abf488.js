"use strict";(self.webpackChunkfdm_monster_docs=self.webpackChunkfdm_monster_docs||[]).push([[6364],{8966:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>d,contentTitle:()=>c,default:()=>m,frontMatter:()=>i,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"installing/docker_compose","title":"Docker and Docker Compose","description":"How to use Docker for your FDM-Monster environment","source":"@site/docs/installing/docker_compose.mdx","sourceDirName":"installing","slug":"/installing/docker_compose","permalink":"/docs/installing/docker_compose","draft":false,"unlisted":false,"editUrl":"https://github.com/fdm-monster/fdm-monster-docs/edit/main/docs/installing/docker_compose.mdx","tags":[],"version":"current","lastUpdatedBy":"Maurice Kevenaar","lastUpdatedAt":1735841008000,"frontMatter":{"title":"Docker and Docker Compose","description":"How to use Docker for your FDM-Monster environment","slug":"/installing/docker_compose","pagination_prev":"installing/index","pagination_next":"software_usage/index"},"sidebar":"docs","previous":{"title":"Installing","permalink":"/docs/installing"},"next":{"title":"Software Usage","permalink":"/docs/software_usage"}}');var s=n(4848),r=n(8453);const i={title:"Docker and Docker Compose",description:"How to use Docker for your FDM-Monster environment",slug:"/installing/docker_compose",pagination_prev:"installing/index",pagination_next:"software_usage/index"},c=void 0,d={},a=[{value:"Running FDM Monster with Docker Compose",id:"running-fdm-monster-with-docker-compose",level:2},{value:"Step 1: FDM Monster image and version tag",id:"step-1-fdm-monster-image-and-version-tag",level:3},{value:"Step 2: Create a docker-compose.yml file",id:"step-2-create-a-docker-composeyml-file",level:3},{value:"Step 3: Execute the docker-compose stack",id:"step-3-execute-the-docker-compose-stack",level:3}];function l(e){const o={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.admonition,{type:"info",children:(0,s.jsxs)(o.p,{children:["Familiarity with ",(0,s.jsx)(o.a,{href:"https://www.docker.com/",children:"Docker"})," and ",(0,s.jsx)(o.a,{href:"https://docs.docker.com/compose/",children:"Docker Compose"})," is required."]})}),"\n",(0,s.jsx)(o.admonition,{type:"tip",children:(0,s.jsx)(o.p,{children:"We simply cannot support custom scenarios or setups. Therefore, it is essential to check your device's memory limits, architecture, and CPU power."})}),"\n",(0,s.jsx)(o.h2,{id:"running-fdm-monster-with-docker-compose",children:"Running FDM Monster with Docker Compose"}),"\n",(0,s.jsx)(o.p,{children:"In the next steps, we will guide you through the process of running FDM Monster with Docker Compose."}),"\n",(0,s.jsx)(o.h3,{id:"step-1-fdm-monster-image-and-version-tag",children:"Step 1: FDM Monster image and version tag"}),"\n",(0,s.jsxs)(o.p,{children:["We provide the ",(0,s.jsx)(o.code,{children:"fdmmonster/fdm-monster"})," image. This image requires you to run a MongoDB server, MongoDB Atlas (cloud offering), or a MongoDB docker container (see compose file below).\nFind it on ",(0,s.jsx)(o.a,{href:"https://hub.docker.com/r/fdmmonster/fdm-monster/tags",children:"Docker Hub"}),"."]}),"\n",(0,s.jsxs)(o.p,{children:["There are multiple tags available for the ",(0,s.jsx)(o.code,{children:"fdmmonster/fdm-monster"})," image."]}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.code,{children:"latest"})," - The latest version of FDM Monster. This is the default tag."]}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.code,{children:"x"}),", ",(0,s.jsx)(o.code,{children:"x.y"}),", ",(0,s.jsx)(o.code,{children:"x.y.z"})," - A specific version of FDM Monster. For example, ",(0,s.jsx)(o.code,{children:"1"}),", ",(0,s.jsx)(o.code,{children:"1.4"}),", or ",(0,s.jsx)(o.code,{children:"1.4.0"}),"."]}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.code,{children:"main"})," - The latest development version of FDM Monster. This version is the same as the ",(0,s.jsx)(o.code,{children:"latest"})," tag and it is stable."]}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.code,{children:"develop"})," - The latest development version of FDM Monster. This version is not recommended for production use."]}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.code,{children:"x.y.z-rc?-1234"})," - A specific release candidate of FDM Monster with a specific build number. For example, ",(0,s.jsx)(o.code,{children:"1.4.0-rc1-1234"}),". These are development versions and are not recommended for production use."]}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.code,{children:"x.y.z-1234"})," - A specific version of FDM Monster with a specific build number. For example, ",(0,s.jsx)(o.code,{children:"1.4.0-1234"}),". These are development versions and are not recommended for production use."]}),"\n"]}),"\n",(0,s.jsx)(o.h3,{id:"step-2-create-a-docker-composeyml-file",children:"Step 2: Create a docker-compose.yml file"}),"\n",(0,s.jsxs)(o.p,{children:["To run a Docker Compose stack, create a file named ",(0,s.jsx)(o.code,{children:"docker-compose.yml"})," and use the file contents presented below. Note that an option has been added for adding MongoDB authentication.\nIf you choose not to use authentication, you can remove the ",(0,s.jsx)(o.code,{children:"MONGO_INITDB_ROOT_USERNAME"})," and ",(0,s.jsx)(o.code,{children:"MONGO_INITDB_ROOT_PASSWORD"})," environment variables.\nIn that case, you should leave out the ",(0,s.jsx)(o.code,{children:"<username>:<password>@"})," part of the ",(0,s.jsx)(o.code,{children:"MONGO"})," environment variable."]}),"\n",(0,s.jsx)(o.admonition,{type:"warning",children:(0,s.jsx)(o.p,{children:"It's important to protect your MongoDB database with authentication. If you choose not to use authentication, you should at least use a firewall to protect your database.\nDo not simply expose your database over the internet without any protection! You have been warned."})}),"\n",(0,s.jsxs)(o.p,{children:["There is also a development (",(0,s.jsx)(o.code,{children:"NODE_ENV=development"}),") compose file here: ",(0,s.jsx)(o.a,{href:"https://github.com/fdm-monster/fdm-monster/tree/main/docker-compose.yml",children:"docker-compose.yml"}),"):"]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-yaml",metastring:'title="docker-compose.yml example"',children:"version: '3.4'\n\nservices:\n  mongodb:\n    image: mongo:latest\n    container_name: mongodb\n    restart: always\n    healthcheck:\n      test: echo 'db.runCommand(\"ping\").ok' | mongosh localhost:27017/test --quiet\n      interval: 10s\n      timeout: 10s\n      retries: 5\n      start_period: 40s\n    environment:\n      # MongoDB with authentication (advised!)\n      - MONGO_INITDB_ROOT_USERNAME=YOUR_ROOT_NAME\n      - MONGO_INITDB_ROOT_PASSWORD=YOUR_ROOT_PASSWORD\n    volumes:\n      - ./mongodb-data:/data/db\n      - ./mongoconfig:/data/configdb\n\n  fdm-monster:\n    container_name: fdm-monster\n    image: fdmmonster/fdm-monster:latest\n    restart: unless-stopped\n    healthcheck:\n      test: curl --fail http://localhost:4000 || exit 1\n      interval: 30s\n      timeout: 5s\n      retries: 5\n      start_period: 40s\n    depends_on:\n      - mongodb\n    ports:\n      - \"4000:4000\"\n    environment:\n      # MongoDB with and without authentication (advised!)\n      - MONGO=mongodb://YOUR_ROOT_NAME:YOUR_ROOT_PASSWORD@mongodb:27017/fdm-monster?authSource=admin\n      # - MONGO=mongodb://mongodb:27017/fdm-monster?authSource=admin\n    volumes:\n      - ./fdm-monster/media:/app/media\n"})}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.em,{children:"An example of a docker-compose.yml file with the MongoDB and FDM-Monster services in one stack."})}),"\n",(0,s.jsxs)(o.admonition,{type:"info",children:[(0,s.jsxs)(o.p,{children:["By default the ",(0,s.jsx)(o.code,{children:"mongodb"})," service is not exposed to your local network. To expose MongoDB add the lines below right above the ",(0,s.jsx)(o.code,{children:"environment"})," line."]}),(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-yaml",children:'    ports:\n      - "28017:27017"\n'})})]}),"\n",(0,s.jsx)(o.h3,{id:"step-3-execute-the-docker-compose-stack",children:"Step 3: Execute the docker-compose stack"}),"\n",(0,s.jsx)(o.p,{children:"Execute this command to run the containers:"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-powershell",children:"docker-compose up -d\n"})}),"\n",(0,s.jsxs)(o.p,{children:["Please note that FDM Monster requires a MongoDB database to function properly. When using the ",(0,s.jsx)(o.code,{children:"latest"})," or ",(0,s.jsx)(o.code,{children:"alpine"})," images,\nmake sure to configure your root user's username and password for MongoDB.\nAdditionally, FDM Monster needs to access the ",(0,s.jsx)(o.code,{children:"admin"})," table, which is the default table name for the authentication source."]}),"\n",(0,s.jsxs)(o.p,{children:["Now you can access FDM Monster at ",(0,s.jsx)(o.code,{children:"http://localhost:4000"}),", ",(0,s.jsx)(o.code,{children:"http://127.0.0.1:4000"}),", or ",(0,s.jsx)(o.code,{children:"http://<your-ip>:4000"}),"."]})]})}function m(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,o,n)=>{n.d(o,{R:()=>i,x:()=>c});var t=n(6540);const s={},r=t.createContext(s);function i(e){const o=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function c(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(r.Provider,{value:o},e.children)}}}]);