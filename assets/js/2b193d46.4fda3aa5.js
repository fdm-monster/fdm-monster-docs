"use strict";(self.webpackChunkfdm_monster_docs=self.webpackChunkfdm_monster_docs||[]).push([[978],{4739:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>d,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var t=n(5893),s=n(1151);const r={title:"Docker and Docker Compose",sidebar_position:2},i="Docker and Docker Compose",a={id:"installing/docker_compose",title:"Docker and Docker Compose",description:"This is a guide on how to use Docker Compose to run FDM Monster.",source:"@site/docs/0_installing/docker_compose.md",sourceDirName:"0_installing",slug:"/installing/docker_compose",permalink:"/docs/installing/docker_compose",draft:!1,unlisted:!1,editUrl:"https://github.com/fdm-monster/fdm-monster-docs/docs/0_installing/docker_compose.md",tags:[],version:"current",lastUpdatedBy:"David Zwart",lastUpdatedAt:1706097914,formattedLastUpdatedAt:"Jan 24, 2024",sidebarPosition:2,frontMatter:{title:"Docker and Docker Compose",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"MonsterPi for Raspberry Pi",permalink:"/docs/installing/monsterpi"},next:{title:"Windows Service",permalink:"/docs/installing/windows_service"}},d={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Running FDM Monster with Docker Compose",id:"running-fdm-monster-with-docker-compose",level:2},{value:"Step 1) FDM Monster image and version tag",id:"step-1-fdm-monster-image-and-version-tag",level:3},{value:"Step 2) Create a docker-compose.yml file",id:"step-2-create-a-docker-composeyml-file",level:3},{value:"Step 3) Execute the docker-compose stack",id:"step-3-execute-the-docker-compose-stack",level:3}];function l(e){const o={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.h1,{id:"docker-and-docker-compose",children:"Docker and Docker Compose"}),"\n",(0,t.jsx)(o.p,{children:"This is a guide on how to use Docker Compose to run FDM Monster."}),"\n",(0,t.jsx)(o.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsx)(o.p,{children:"Familiarity with Docker and Docker Compose is assumed. While these tools are beneficial, they may be unfamiliar to some users.\nPlease note that we cannot support custom scenarios or setups. Therefore, it is essential to check your device's memory limits, architecture, and CPU power."}),"\n",(0,t.jsx)(o.h2,{id:"running-fdm-monster-with-docker-compose",children:"Running FDM Monster with Docker Compose"}),"\n",(0,t.jsx)(o.p,{children:"In the next steps we will guide you through the process of running FDM Monster with Docker Compose."}),"\n",(0,t.jsx)(o.h3,{id:"step-1-fdm-monster-image-and-version-tag",children:"Step 1) FDM Monster image and version tag"}),"\n",(0,t.jsxs)(o.p,{children:["We provide the ",(0,t.jsx)(o.code,{children:"fdmmonster/fdm-monster"})," image. This image requires you to run a MongoDB server, MongoDB Atlas (cloud offering) or a MongoDB docker container (see compose file below).\nFind it on ",(0,t.jsx)(o.a,{href:"https://hub.docker.com/r/fdmmonster/fdm-monster/tags",children:"Docker Hub"}),"."]}),"\n",(0,t.jsxs)(o.p,{children:["There are multiple tags available for the ",(0,t.jsx)(o.code,{children:"fdmmonster/fdm-monster"})," image."]}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.code,{children:"latest"})," - The latest version of FDM Monster. This is the default tag."]}),"\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.code,{children:"x"}),", ",(0,t.jsx)(o.code,{children:"x.y"}),", ",(0,t.jsx)(o.code,{children:"x.y.z"})," - A specific version of FDM Monster. For example, ",(0,t.jsx)(o.code,{children:"1"}),", ",(0,t.jsx)(o.code,{children:"1.4"})," or ",(0,t.jsx)(o.code,{children:"1.4.0"}),"."]}),"\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.code,{children:"main"})," - The latest development version of FDM Monster. This version is the same as the ",(0,t.jsx)(o.code,{children:"latest"})," tag and it is stable."]}),"\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.code,{children:"develop"})," - The latest development version of FDM Monster. This version is not recommended for production use."]}),"\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.code,{children:"x.y.z-rc?-1234"})," - A specific release candidate of FDM Monster with a specific build number. For example, ",(0,t.jsx)(o.code,{children:"1.4.0-rc1-1234"}),". These are development versions and are not recommended for production use."]}),"\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.code,{children:"x.y.z-1234"})," - A specific version of FDM Monster with a specific build number. For example, ",(0,t.jsx)(o.code,{children:"1.4.0-1234"}),". These are development versions and are not recommended for production use."]}),"\n"]}),"\n",(0,t.jsx)(o.h3,{id:"step-2-create-a-docker-composeyml-file",children:"Step 2) Create a docker-compose.yml file"}),"\n",(0,t.jsxs)(o.p,{children:["To run a Docker Compose stack, create a file named ",(0,t.jsx)(o.code,{children:"docker-compose.yml"})," and use the file contents presented below. Note that an option has been added for adding MongoDB authentication.\nIf you choose not to use authentication, you can remove the ",(0,t.jsx)(o.code,{children:"MONGO_INITDB_ROOT_USERNAME"})," and ",(0,t.jsx)(o.code,{children:"MONGO_INITDB_ROOT_PASSWORD"})," environment variables.\nIn that case you should leave out the ",(0,t.jsx)(o.code,{children:"<username>:<password>@"})," part of the ",(0,t.jsx)(o.code,{children:"MONGO"})," environment variable."]}),"\n",(0,t.jsx)(o.admonition,{type:"warning",children:(0,t.jsx)(o.p,{children:"It's important to protect your MongoDB database with authentication. If you choose not to use authentication, you should at least use a firewall to protect your database.\nDo not simply expose your database over the internet without any protection! You have been warned."})}),"\n",(0,t.jsxs)(o.p,{children:["There is also a development (",(0,t.jsx)(o.code,{children:"NODE_ENV=development"}),") compose file here: ",(0,t.jsx)(o.a,{href:"https://github.com/fdm-monster/fdm-monster/tree/main/docker-compose.yml",children:"docker-compose.yml"}),"):"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-yaml",children:'version: \'3.4\'\n\nservices:\n  mongodb:\n    image: mongo:latest\n    container_name: mongodb\n    environment:\n      # MongoDB with authentication (optional)\n      - MONGO_INITDB_ROOT_USERNAME=YOUR_ROOT_NAME\n      - MONGO_INITDB_ROOT_PASSWORD=YOUR_ROOT_PASSWORD\n    ports:\n      - "28017:27017"\n    volumes:\n      - ./mongodb-data:/data/db\n      - ./mongoconfig:/data/configdb\n    restart: unless-stopped\n\n  fdm-monster:\n    container_name: fdm-monster\n    image: fdmmonster/fdm-monster:latest\n    restart: unless-stopped\n    ports:\n      - "4000:4000"\n    environment:\n      # MongoDB with and without authentication (optional)\n      - MONGO=mongodb://YOUR_ROOT_NAME:YOUR_ROOT_PASSWORD@mongodb:27017/fdm-monster?authSource=admin\n      # - MONGO=mongodb://mongodb:27017/fdm-monster?authSource=admin\n    volumes:\n      - ./fdm-monster/media:/app/media\n\n  # The unstable alpha release version\n  fdm-monster-alpha:\n    container_name: fdm-monster-alpha\n    image: fdmmonster/fdm-monster:1.6.0-rc1-alpha\n    restart: unless-stopped\n    ports:\n      - "4001:4001"\n    environment:\n      - NODE_ENV=development\n      - SERVER_PORT=4001\n    volumes:\n      - ./fdm-monster-alpha/media/:/app/media\n      - ./fdm-monster-alpha/database/:/app/database  \n'})}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.em,{children:"An example docker-compose.yml file with the mongodb and fdm-monster services in one stack."})}),"\n",(0,t.jsx)(o.h3,{id:"step-3-execute-the-docker-compose-stack",children:"Step 3) Execute the docker-compose stack"}),"\n",(0,t.jsx)(o.p,{children:"Execute this command to run the containers:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-powershell",children:"docker-compose up -d\n"})}),"\n",(0,t.jsxs)(o.p,{children:["Please note that FDM Monster requires a MongoDB database to function properly. When using the ",(0,t.jsx)(o.code,{children:"latest"})," or ",(0,t.jsx)(o.code,{children:"alpine"})," images,\nmake sure to configure your root-user's username and password for MongoDB.\nAdditionally, FDM Monster needs to access the ",(0,t.jsx)(o.code,{children:"admin"})," table, which is the default table name for the authentication source."]}),"\n",(0,t.jsxs)(o.p,{children:["Now you can access FDM Monster at ",(0,t.jsx)(o.code,{children:"http://localhost:4000"}),", ",(0,t.jsx)(o.code,{children:"http://127.0.0.1:4000"})," or ",(0,t.jsx)(o.code,{children:"http://<your-ip>:4000"}),"."]})]})}function m(e={}){const{wrapper:o}={...(0,s.a)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},1151:(e,o,n)=>{n.d(o,{Z:()=>a,a:()=>i});var t=n(7294);const s={},r=t.createContext(s);function i(e){const o=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(r.Provider,{value:o},e.children)}}}]);